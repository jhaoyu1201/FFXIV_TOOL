<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>FFXIV å‹•æ…‹é¸å–®å·¨é›†ç”¢ç”Ÿå™¨</title>
    <style>
        body { font-family: "Microsoft JhengHei", sans-serif; max-width: 650px; margin: 40px auto; padding: 20px; line-height: 1.6; background-color: #f0f2f5; }
        .container { border: 1px solid #ddd; padding: 30px; border-radius: 12px; background: white; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #2c3e50; border-bottom: 2px solid #3498db; padding-bottom: 10px; }
        
        .logic-folder { margin-bottom: 25px; border: 1px solid #e0e0e0; border-radius: 6px; overflow: hidden; }
        .logic-header { background: #f8f9fa; padding: 12px 15px; cursor: pointer; display: flex; justify-content: space-between; font-weight: bold; color: #3498db; }
        .logic-content { display: none; padding: 20px; background: #fff; border-top: 1px solid #e0e0e0; }
        .step-box { background: #f0f7ff; border-left: 4px solid #3498db; padding: 10px 15px; margin-bottom: 15px; font-size: 0.95em; }

        .input-group { margin-bottom: 15px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; color: #34495e; }
        input[type="number"], input[type="text"] { width: 100%; padding: 10px; border: 1px solid #bdc3c7; border-radius: 4px; box-sizing: border-box; }
        
        .options-group { background: #fdfdfd; padding: 15px; border: 1px dashed #3498db; border-radius: 8px; margin: 20px 0; }
        .default-hint { font-size: 0.85em; color: #e67e22; margin-top: 10px; font-weight: bold; display: block; }

        .result-section { position: relative; margin-top: 20px; display: none; }
        .result-title { font-size: 0.9em; font-weight: bold; color: #e67e22; margin-bottom: 5px; }
        .code-box { background: #1e1e1e; color: #dcdcdc; padding: 15px; border-radius: 6px; white-space: pre-wrap; font-family: "Consolas", monospace; font-size: 1.05em; border-left: 5px solid #3498db; margin-bottom: 10px; }
        
        .btn-primary { background: #3498db; color: white; border: none; padding: 12px; border-radius: 4px; cursor: pointer; width: 100%; font-size: 1.1em; font-weight: bold; }
        .btn-copy { position: absolute; top: 30px; right: 10px; background: #27ae60; color: white; border: none; padding: 4px 10px; border-radius: 4px; cursor: pointer; font-size: 0.85em; }
    </style>
</head>
<body>

<div class="container">
    <h2>FFXIV æŠ½å±œé¸å–®å·¨é›†ç”¢ç”Ÿå™¨</h2>

    <div class="logic-folder">
        <div class="logic-header" onclick="toggleLogic()">
            <span>ğŸ“– è£½ä½œæ•™å­¸èˆ‡åŸç† (é»æ“Šå±•é–‹)</span>
            <span id="logic-arrow">â–¼</span>
        </div>
        <div id="logic-content" class="logic-content">
            <h3 style="margin-top:0;">ğŸ› ï¸ ä¸‰æ­¥æ‰“é€ ä½ çš„å‹•æ…‹æŠ½å±œ</h3>
            <div class="step-box"><b>1. æŒ‡å®šé¡¯ç¤ºå€ï¼š</b>é¸å®šä¸€å€‹ã€Œå…¬ç”¨å¿«æ·æ¬„ã€ï¼ˆä¾‹å¦‚ï¼šHotbar 9ï¼‰ä¸¦æ¸…ç©ºå®ƒã€‚</div>
            <div class="step-box"><b>2. ä½ˆç½®å¾Œå°å€‰åº«ï¼š</b>åˆ‡æ›åˆ°ä¸ç”¨çš„è·æ¥­ï¼ˆå¦‚ï¼šåˆ»æœ¨åŒ ï¼‰ï¼Œåœ¨æŸä¸€æ¬„æ’å¥½æŒ‰éˆ•ã€‚</div>
            <div class="step-box"><b>3. ç”¢ç”Ÿå·¨é›†ï¼š</b>è¼¸å…¥è³‡è¨Šä¸¦å°‡æŒ‡ä»¤è¤‡è£½åˆ°ä¸»ç•«é¢çš„å·¨é›†æ¬„ä½ã€‚</div>
        </div>
    </div>
    
    <div class="input-group">
        <label>1. é¡¯ç¤ºä½ç½®ï¼ˆå…¬ç”¨å¿«æ·æ¬„ç·¨è™Ÿï¼‰</label>
        <input type="number" id="displayNum" placeholder="è«‹è¼¸å…¥ç·¨è™Ÿï¼ˆä¾‹å¦‚ï¼š9ï¼‰">
    </div>
    <div class="input-group">
        <label>2. å¾Œå°è·æ¥­ï¼ˆå€‰åº«è·æ¥­åç¨±ï¼‰</label>
        <input type="text" id="storageJob" placeholder="ä¾‹å¦‚ï¼šåˆ»æœ¨åŒ  æˆ– CRP">
    </div>
    <div class="input-group">
        <label>3. å…§å®¹æ‰€åœ¨æ¬„ä½ï¼ˆå€‰åº«çš„ç¬¬å¹¾æ¬„ï¼‰</label>
        <input type="number" id="storageNum" placeholder="ä¾‹å¦‚ï¼š1">
    </div>

    <div class="options-group">
        <strong>é€²éšåŠŸèƒ½ï¼š</strong>
        <div style="margin-top: 10px;">
            <input type="checkbox" id="enableAutoClose" onchange="toggleSettings()">
            <label for="enableAutoClose" style="cursor:pointer;">A. è‡ªå‹•é—œé–‰ï¼ˆå¹¾ç§’å¾Œè‡ªå‹•éš±è—ï¼‰</label>
            <span id="autoCloseInput" style="display:none; margin-left: 10px;">
                <input type="number" id="waitSec" value="5" style="width: 50px;"> ç§’
            </span>
        </div>
        <div style="margin-top: 8px;">
            <input type="checkbox" id="enableCloseBtn">
            <label for="enableCloseBtn" style="cursor:pointer;">B. ç”¢ç”Ÿã€Œæ‰‹å‹•é—œé–‰ã€æŒ‰éˆ•æŒ‡ä»¤</label>
        </div>
        <span class="default-hint">â€» è¨»ï¼šè‹¥æœªå‹¾é¸ A é¸é …ï¼Œé è¨­é‚è¼¯ç‚ºã€Œé»ä¸€ä¸‹é–‹å•Ÿï¼Œå†é»ä¸€ä¸‹é—œé–‰ã€ã€‚</span>
    </div>

    <button class="btn-primary" onclick="generateMacro()">ç”Ÿæˆå·¨é›†</button>

    <div id="main-result" class="result-section">
        <div class="result-title">â˜… ä¸»è§¸ç™¼å·¨é›†</div>
        <button class="btn-copy" onclick="copyText('main-code', this)">è¤‡è£½</button>
        <div id="main-code" class="code-box"></div>
    </div>

    <div id="close-result" class="result-section">
        <div class="result-title">â˜… æ‰‹å‹•é—œé–‰æŒ‡ä»¤</div>
        <button class="btn-copy" onclick="copyText('close-code', this)">è¤‡è£½</button>
        <div id="close-code" class="code-box"></div>
    </div>
</div>

<script>
function toggleSettings() {
    document.getElementById('autoCloseInput').style.display = document.getElementById('enableAutoClose').checked ? 'inline' : 'none';
}

function toggleLogic() {
    const content = document.getElementById('logic-content');
    const isHidden = content.style.display === 'none' || content.style.display === '';
    content.style.display = isHidden ? 'block' : 'none';
    document.getElementById('logic-arrow').innerText = isHidden ? 'â–²' : 'â–¼';
}

function generateMacro() {
    const dNum = document.getElementById('displayNum').value;
    const sJob = document.getElementById('storageJob').value;
    const sNum = document.getElementById('storageNum').value;
    const enableAuto = document.getElementById('enableAutoClose').checked;
    const wait = document.getElementById('waitSec').value;
    
    if(!dNum || !sJob || !sNum) return alert("è«‹å®Œæ•´å¡«å¯«è³‡è¨Š");

    let main = `/hotbar copy ${sJob} ${sNum} share ${dNum}\n`;
    if(enableAuto) {
        main += `/hotbar display ${dNum} on <wait.${wait}>\n/hotbar display ${dNum} off`;
    } else {
        main += `/hotbar display ${dNum}`;
    }
    
    document.getElementById('main-code').innerText = main;
    document.getElementById('main-result').style.display = 'block';

    if(document.getElementById('enableCloseBtn').checked) {
        document.getElementById('close-code').innerText = `/hotbar display ${dNum} off`;
        document.getElementById('close-result').style.display = 'block';
    } else {
        document.getElementById('close-result').style.display = 'none';
    }
}

async function copyText(id, btn) {
    const txt = document.getElementById(id).innerText;
    await navigator.clipboard.writeText(txt);
    const oldText = btn.innerText;
    btn.innerText = "å·²è¤‡è£½ï¼";
    setTimeout(() => btn.innerText = oldText, 2000);
}
</script>

</body>
</html>